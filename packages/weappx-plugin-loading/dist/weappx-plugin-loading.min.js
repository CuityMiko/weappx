!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["weappx-plugin-loading"]=t():e["weappx-plugin-loading"]=t()}("undefined"!=typeof self?self:this,function(){return function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.namespace,r=void 0===t?"loading":t,n=e.global,f=void 0===n?"global":n,o=function(e,t,n){return e({type:r+"/save",payload:{actionType:t,loading:n}})};return{prefixMiddlewares:[function(e){var n=e.dispatch;return e.getState,function(t){return function(e){return e.meta&&e.payload&&e.payload instanceof Function&&o(n,e.type,!0),t(e)}}}],suffixMiddlewares:[function(e){var n=e.dispatch;return e.getState,function(e){return function(t){return t.meta&&t.payload&&t.payload instanceof Promise&&t.payload.then(function(e){return o(n,t.type,!1),e}),e(t)}}}],extraModels:[{namespace:r,state:{"@namespaceLoadingCounts":{}},mutations:{save:function(e,t){var n=t.actionType,r=t.loading;e[n]=r;var o=n.split("/"),a=c(o,2),i=a[0],u=(a[1],e["@namespaceLoadingCounts"]);u[i]||(u[i]=0),r?u[i]++:u[i]--,e[i]=!!u[i],e[f]=function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!0;return!1}(u)}}}]}},e.exports=t.default}])});